<div class="all-page-montage">
  <div class="min-height-card">
    <div class="empty-card"></div>
    <div class="card-head df sticky-card">
      <div class="mr-10">
        <p-dropdown placeholder="ПРОЕКТ" [(ngModel)]="project" [options]="projects" (ngModelChange)="projectChanged()" styleClass="width-170 border">
        </p-dropdown>
      </div>
      <div class="p-ml-auto mr-10 ml-10">
        <p-multiSelect placeholder="Select Drawing" class="select mr-10" [(ngModel)]="selectedDrawings" [options]="drawingValues" (ngModelChange)="filterChanged()" styleClass="width-160 border">
        </p-multiSelect>
        <p-multiSelect placeholder="Select SFI" class="select mr-10" [(ngModel)]="selectedSfi" [options]="sfiValues" (ngModelChange)="filterChanged()" styleClass="width-160 border">
        </p-multiSelect>
        <p-multiSelect placeholder="Select System" class="select mr-10" [(ngModel)]="selectedSystems" [options]="systemValues" (ngModelChange)="filterChanged()" styleClass="width-160 border">
        </p-multiSelect>
        <p-dropdown placeholder="Sort by" class="select" [(ngModel)]="sortValue" [options]="sortValues" (ngModelChange)="sortChanged()" styleClass="width-160 border">
        </p-dropdown>
      </div>
    </div>
    <div class="empty-card-bottom"></div>

    <div class="tile">
      <div *ngFor="let drawing of drawings; let i = index" class="card-tile df" [class.hidden-card]="drawing == null">
        <div>
          <div>
            <div pTooltip="Open cloud" tooltipPosition="top">
              <svg *ngIf="drawing.MATERIAL != null && drawing.MATERIAL.materialCloudDirectory != '' && drawing.MATERIAL.materialCloudDirectory != 'LOADING'" (click)="openMaterialCloudDirectory(drawing.MATERIAL)" class="cloud cursor-pointer" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" height="26px"
                   viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512.001 512.001;" xml:space="preserve">
                  <path style="fill:#36A9E1;" d="M430.751,223.448c0.067-1.356,0.204-2.693,0.204-4.066c0-44.942-36.433-81.374-81.374-81.374 c-8.933,0-17.505,1.493-25.547,4.152c-23.713-32.081-61.696-52.976-104.653-52.976c-71.907,0-130.199,58.293-130.199,130.199	                      c0,0.684,0.093,1.345,0.103,2.028c-46.478,9.387-81.477,50.446-81.477,99.691c0,56.178,45.54,101.718,101.718,101.718h292.949	c56.178,0,101.718-45.541,101.718-101.718C504.192,274.746,473.155,235.709,430.751,223.448z"/>
                <path style="fill:#5EBAE7;" d="M324.035,142.159c-23.713-32.081-61.696-52.976-104.653-52.976	c-71.907,0-130.199,58.293-130.199,130.199c0,0.684,0.093,1.345,0.103,2.028c-46.479,9.387-81.478,50.446-81.478,99.691	c0,56.178,45.54,101.718,101.718,101.718"/>
                <path style="fill:#1D1D1B;" d="M402.474,430.626H109.526C49.133,430.626,0,381.493,0,321.101c0-49.761,33.878-93.29,81.437-105.875	c2.202-74.185,63.237-133.851,137.945-133.851c22.248,0,43.489,5.158,63.134,15.332c17.069,8.839,32.332,21.374,44.434,36.445	c7.431-1.961,15.02-2.952,22.633-2.952c48.652,0,88.331,39.16,89.168,87.616c20.006,7.049,37.887,20.002,50.827,36.932	c14.67,19.193,22.424,42.137,22.424,66.352C512,381.493,462.867,430.626,402.474,430.626z M219.381,96.99	c-67.487,0-122.392,54.904-122.392,122.392c0,0.174,0.02,0.345,0.031,0.515c0.033,0.459,0.062,0.918,0.07,1.385l0.107,6.495	l-6.368,1.286c-43.582,8.803-75.215,47.51-75.215,92.039c0,51.782,42.128,93.91,93.91,93.91h292.949	c51.782,0,93.91-42.128,93.91-93.91c0-20.759-6.645-40.424-19.215-56.87c-12.168-15.921-29.425-27.741-48.587-33.281l-5.93-1.716	l0.3-6.165c0.025-0.514,0.059-1.024,0.094-1.537c0.052-0.777,0.102-1.511,0.102-2.15c0-40.565-33.001-73.567-73.567-73.567	c-7.787,0-15.557,1.264-23.096,3.757l-5.369,1.776l-3.361-4.547C294.357,115.144,258.501,96.99,219.381,96.99z"/>
                <path style="fill:#FFFFFF;" d="M151.219,193.408h-15.615c0-35.251,28.679-63.929,63.929-63.929v15.615	C172.892,145.095,151.219,166.768,151.219,193.408z"/>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
            </svg>
            </div>
            <div *ngIf="drawing.MATERIAL != null && drawing.MATERIAL.materialCloudDirectory == 'LOADING'">
              <img src="assets/icons/cloud.gif" height="26">
            </div>
            <div>
              <svg *ngIf="drawing.MATERIAL != null && drawing.MATERIAL.materialCloudDirectory == ''" (click)="createMaterialCloudDirectory(drawing.MATERIAL)" class="cloud cursor-pointer" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" height="26px"
                   viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512.001 512.001;" xml:space="preserve">
                  <path style="fill:#ffffff;" d="M430.751,223.448c0.067-1.356,0.204-2.693,0.204-4.066c0-44.942-36.433-81.374-81.374-81.374 c-8.933,0-17.505,1.493-25.547,4.152c-23.713-32.081-61.696-52.976-104.653-52.976c-71.907,0-130.199,58.293-130.199,130.199	                      c0,0.684,0.093,1.345,0.103,2.028c-46.478,9.387-81.477,50.446-81.477,99.691c0,56.178,45.54,101.718,101.718,101.718h292.949	c56.178,0,101.718-45.541,101.718-101.718C504.192,274.746,473.155,235.709,430.751,223.448z"/>
                <path style="fill:#ffffff;" d="M324.035,142.159c-23.713-32.081-61.696-52.976-104.653-52.976	c-71.907,0-130.199,58.293-130.199,130.199c0,0.684,0.093,1.345,0.103,2.028c-46.479,9.387-81.478,50.446-81.478,99.691	c0,56.178,45.54,101.718,101.718,101.718"/>
                <path style="fill:#1D1D1B;" d="M402.474,430.626H109.526C49.133,430.626,0,381.493,0,321.101c0-49.761,33.878-93.29,81.437-105.875	c2.202-74.185,63.237-133.851,137.945-133.851c22.248,0,43.489,5.158,63.134,15.332c17.069,8.839,32.332,21.374,44.434,36.445	c7.431-1.961,15.02-2.952,22.633-2.952c48.652,0,88.331,39.16,89.168,87.616c20.006,7.049,37.887,20.002,50.827,36.932	c14.67,19.193,22.424,42.137,22.424,66.352C512,381.493,462.867,430.626,402.474,430.626z M219.381,96.99	c-67.487,0-122.392,54.904-122.392,122.392c0,0.174,0.02,0.345,0.031,0.515c0.033,0.459,0.062,0.918,0.07,1.385l0.107,6.495	l-6.368,1.286c-43.582,8.803-75.215,47.51-75.215,92.039c0,51.782,42.128,93.91,93.91,93.91h292.949	c51.782,0,93.91-42.128,93.91-93.91c0-20.759-6.645-40.424-19.215-56.87c-12.168-15.921-29.425-27.741-48.587-33.281l-5.93-1.716	l0.3-6.165c0.025-0.514,0.059-1.024,0.094-1.537c0.052-0.777,0.102-1.511,0.102-2.15c0-40.565-33.001-73.567-73.567-73.567	c-7.787,0-15.557,1.264-23.096,3.757l-5.369,1.776l-3.361-4.547C294.357,115.144,258.501,96.99,219.381,96.99z"/>
                <path style="fill:#FFFFFF;" d="M151.219,193.408h-15.615c0-35.251,28.679-63.929,63.929-63.929v15.615	C172.892,145.095,151.219,166.768,151.219,193.408z"/>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
            </svg>
            </div>
            <div pTooltip="No material" tooltipPosition="top">
              <svg *ngIf="drawing.MATERIAL == null && drawing.CSTOCK_CODE == ''" class="cloud cursor-pointer" height="26" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512.001 512.001;" xml:space="preserve">
              <path style="fill:#FC3F1D;" d="M430.751,223.448c0.067-1.356,0.204-2.693,0.204-4.066c0-44.942-36.433-81.374-81.374-81.374	c-8.933,0-17.505,1.493-25.547,4.152c-23.713-32.081-61.696-52.976-104.653-52.976c-71.907,0-130.199,58.293-130.199,130.199	c0,0.684,0.093,1.345,0.103,2.028c-46.478,9.387-81.477,50.446-81.477,99.691c0,56.178,45.54,101.718,101.718,101.718h292.949	c56.178,0,101.718-45.541,101.718-101.718C504.192,274.746,473.155,235.709,430.751,223.448z"/>
                <path style="fill:#FF4651;" d="M324.035,142.159c-23.713-32.081-61.696-52.976-104.653-52.976	c-71.907,0-130.199,58.293-130.199,130.199c0,0.684,0.093,1.345,0.103,2.028c-46.479,9.387-81.478,50.446-81.478,99.691	c0,56.178,45.54,101.718,101.718,101.718"/>
                <path style="fill:#1D1D1B;" d="M402.474,430.626H109.526C49.133,430.626,0,381.493,0,321.101c0-49.761,33.878-93.29,81.437-105.875	c2.202-74.185,63.237-133.851,137.945-133.851c22.248,0,43.489,5.158,63.134,15.332c17.069,8.839,32.332,21.374,44.434,36.445	c7.431-1.961,15.02-2.952,22.633-2.952c48.652,0,88.331,39.16,89.168,87.616c20.006,7.049,37.887,20.002,50.827,36.932	c14.67,19.193,22.424,42.137,22.424,66.352C512,381.493,462.867,430.626,402.474,430.626z M219.381,96.99	c-67.487,0-122.392,54.904-122.392,122.392c0,0.174,0.02,0.345,0.031,0.515c0.033,0.459,0.062,0.918,0.07,1.385l0.107,6.495	l-6.368,1.286c-43.582,8.803-75.215,47.51-75.215,92.039c0,51.782,42.128,93.91,93.91,93.91h292.949	c51.782,0,93.91-42.128,93.91-93.91c0-20.759-6.645-40.424-19.215-56.87c-12.168-15.921-29.425-27.741-48.587-33.281l-5.93-1.716	l0.3-6.165c0.025-0.514,0.059-1.024,0.094-1.537c0.052-0.777,0.102-1.511,0.102-2.15c0-40.565-33.001-73.567-73.567-73.567	c-7.787,0-15.557,1.264-23.096,3.757l-5.369,1.776l-3.361-4.547C294.357,115.144,258.501,96.99,219.381,96.99z"/>
                <path style="fill:#FFFFFF;" d="M151.219,193.408h-15.615c0-35.251,28.679-63.929,63.929-63.929v15.615	C172.892,145.095,151.219,166.768,151.219,193.408z"/>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
            </svg>
            </div>
          </div>
          <div *ngIf="drawing.MATERIAL != null" class="status-pulse">
            <div class="pulse" tooltipPosition="top" pTooltip="not rate">
              <div class="dot red"></div>
            </div>
          </div>
        </div>

        <div class="min-width-160">
          <div class="title-bold">{{drawing.BSFOUNDATION}}</div>
          <div class="">
            <div *ngIf="drawing.BSFOUNDATION_DESCR != ''" class="title-bold-m">{{drawing.BSFOUNDATION_DESCR}}</div>
            <div *ngIf="drawing.BSFOUNDATION_DESCR == ''" class="title-bold-m">Drawing name</div>
          </div>
          <div class="df mt-15">
            <div class="text-medium">{{drawing.SYSTEMNAME + ' ' + drawing.SYSTEMDESCR}}</div>
          </div>
        </div>

        <div class="cy min-width-80 cursor-default pr-10">
          <div pTooltip="Weight" tooltipPosition="top" class="df">
            <img *ngIf="drawing.CWEIGHT != 0" class="pr-5" src="assets/icons/weight3.svg" height="20">
            <img *ngIf="drawing.CWEIGHT == 0" class="pr-5" src="assets/icons/weight4.svg" height="20">
            <div class="text-table-col text-kg">{{round(drawing.CWEIGHT)}}</div>
            <span class="ml-3 mm-text-black text-kg mb-1px">kg</span>
          </div>
        </div>
        <div class="position-relative min-width-230">
          <div class="df">
            <div>
              <div class="kpl-flag cxy">
                <div class="text-center-x">
                  <span [innerHTML]="(drawing.EUSERID) | highLight: search"></span>
                </div>
              </div>
            </div>
            <div class="title-bold min-width-120 pb-20" *ngIf="drawing.MATERIAL == null">{{drawing.BSDESCRIPTION}}</div>
            <div class="title-bold min-width-120 pb-20" *ngIf="drawing.MATERIAL != null">{{drawing.MATERIAL.name}}</div>
          </div>
          <div class="df trm-abs">
            <div class="cy">
              <div *ngIf="drawing.CSTOCK_CODE.trim() != ''" class="df position-relative">
                <div class="trm">
                  <span [innerHTML]="drawing.CSTOCK_CODE | highLight: search"></span>
                </div>
                <div (click)="copyTrmCode(drawing.CSTOCK_CODE, 's' + 'sp' + i); $event.stopPropagation();" class="trm-copy cursor-pointer cxy">
                  <img src="assets/icons/trm.svg" height="12">
                  <div class="copy-tooltip" [hidden]="!showTooltip('s' + 'sp' + i)">Copied!</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="cy px-10 min-width-100 flex-column">
          <div class="mm-text mb-10">supplier</div>
          <div class="df" *ngIf="drawing.MATERIAL != null">
            <img *ngIf="drawing.MATERIAL.provider != ''" class="pr-5" src="assets/icons/delivery.svg" height="30">
            <div class="text-table-col cy" >{{drawing.MATERIAL.provider}}</div>
          </div>
          <div class="df" *ngIf="drawing.MATERIAL == null">
            <img class="pr-5" src="assets/icons/delivery1.svg" height="30">
          </div>



        </div>
        <div class="three-row-m df">
          <div class="cxy cursor-default mr-20">
            <div class="cxy flex-column">
              <img src="assets/icons/gravity.svg">
              <div class="mm-text">COG</div>
            </div>
            <div class="ml-10">
              <div class="x-label mb-5">
                <span class="coordinate-name">X</span>
                <span>{{round(drawing.XCOG)}}</span>
              </div>
              <div class="y-label mb-5">
                <span class="coordinate-name">Y</span>
                <span>{{round(drawing.YCOG)}}</span>
              </div>
              <div class="z-label">
                <span class="coordinate-name">Z</span>
                <span>{{round(drawing.ZCOG)}}</span>
              </div>
            </div>
          </div>
          <div class="creator cursor-default df">
            <div>
              <div class="mm-text mb-6">creator</div>
              <div class="text-medium">{{getName(drawing.EUSER_NEW)}}</div>
              <div class="mm-text">{{getDate(drawing.EDATE_NEW)}}</div>
            </div>
            <div class="ml-10">
              <div class="mm-text mb-6">modifier</div>
              <div class="text-medium">{{getName(drawing.EUSER_MOD)}}</div>
              <div class="mm-text">{{getDate(drawing.EDATE_MOD)}}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

