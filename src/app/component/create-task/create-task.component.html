<div class="center">
  <div class="big-text mb-1">Проект</div>
  <p-dropdown class="select" [(ngModel)]="taskProject" [options]="taskProjects">
  </p-dropdown>
  <div class="big-text mb-1 mt-1">Тип задачи</div>
  <p-dropdown styleClass="dark-panel" [(ngModel)]="taskType" [options]="taskTypes">
  </p-dropdown>

  <div *ngIf="taskType == 'RKD'">
    <div class="big-text mb-1 mt-1">Название задачи</div>
    <input type="text" pInputText [(ngModel)]="taskSummary">
    <div class="big-text mb-1 mt-1">Описание задачи</div>
    <p-editor [(ngModel)]="taskDetails" [style]="{'height':'fit-content', 'min-height':'100px', 'max-width':'650px'}"></p-editor>
    <div class="big-text mb-1 mt-1">Исполнитель</div>


    <p-dropdown [style]="{'width':'300px'}" placeholder="Не назначен" class="select" [(ngModel)]="taskResponsible" [options]="taskProjects" optionLabel="name" optionValue="id">
    </p-dropdown>

    <div class="link-text mb-1">Назначить мне</div>


    <div class="big-text mb-1 mt-1">Дата начала</div>
    <p-calendar [(ngModel)]="taskStart" [showWeek]="true" dateFormat="dd.mm.yy"></p-calendar>
    <div class="small-text mb-1">Позволяет установить запланированную дату начала работы.</div>
    <div class="big-text mb-1 mt-1">Срок исполнения</div>
    <p-calendar [(ngModel)]="taskStart" [showWeek]="true" dateFormat="dd.mm.yy"></p-calendar>
    <div class="big-text mb-1 mt-1">Вложение</div>
    <div class="upload">
      <div class="cx cy loading">
        <div class="cxy" (click)="selectFiles.click()" (drop)="selectFiles.ondrop">
          <img class="mr-1" src="assets/upload.svg" height="28">
          <span class="normal-text">Перетащите файлы или нажмите для загрузки</span>
        </div>
      </div>
    </div>
    <input hidden #selectFiles type="file" (change)="handleFileInput(selectFiles.files)" multiple>
    <div *ngIf="awaitForLoad.length > 0">
      Loading:
      <div *ngFor="let file of awaitForLoad">{{file}}</div>
    </div>
    <div *ngIf="loaded.length > 0">
      Loaded:
      <div *ngFor="let file of loaded">{{file.name}}</div>
    </div>
  </div>
  <div *ngIf="taskType == 'IT'">
    <div class="big-text mb-1 mt-1">Название задачи</div>
    <input type="text" pInputText [(ngModel)]="taskSummary">
    <div class="big-text mb-1 mt-1">Описание задачи</div>
    <p-editor [(ngModel)]="taskDetails" [style]="{'height':'fit-content', 'min-height':'100px', 'min-width':'650px', 'max-width':'650px'}">
      <p-header>
        <span class="ql-formats">
          <select class="ql-header" tabindex="-1">
            <option value="1" tabindex="-1">Heading</option>
            <option value="2" tabindex="-1">Subheading</option>
            <option selected tabindex="-1">Normal</option>
          </select>
          <select class="ql-font" tabindex="-1">
            <option selected tabindex="-1">Sans Serif</option>
            <option value="serif" tabindex="-1">Serif</option>
            <option value="monospace" tabindex="-1">Monospace</option>
          </select>
        </span>
        <span class="ql-formats">
          <button class="ql-bold" aria-label="Bold" tabindex="-1"></button>
          <button class="ql-italic" aria-label="Italic" tabindex="-1"></button>
          <button class="ql-underline" aria-label="Underline" tabindex="-1"></button>
        </span>
        <span class="ql-formats">
          <select class="ql-color" tabindex="-1"></select>
          <select class="ql-background" tabindex="-1"></select>
        </span>
        <span class="ql-formats">
          <button class="ql-list" value="ordered" aria-label="Ordered List" tabindex="-1"></button>
          <button class="ql-list" value="bullet" aria-label="Unordered List" tabindex="-1"></button>
          <select class="ql-align" tabindex="-1">
            <option selected tabindex="-1"></option>
            <option value="center" tabindex="-1"></option>
            <option value="right" tabindex="-1"></option>
            <option value="justify" tabindex="-1"></option>
          </select>
        </span>
        <span class="ql-formats">
          <button class="ql-link" aria-label="Insert Link" tabindex="-1"></button>
          <button class="ql-image" aria-label="Insert Image" tabindex="-1"></button>
          <button class="ql-code-block" aria-label="Insert Code Block" tabindex="-1"></button>
        </span>
        <span class="ql-formats">
          <button class="ql-clean" aria-label="Remove Styles" tabindex="-1"></button>
        </span>
      </p-header>
    </p-editor>
    <div class="big-text mb-1 mt-1">Вложение</div>
    <div class="upload">
      <div class="cx cy loading">
        <div class="cxy" (click)="selectFiles.click()" (drop)="$event.preventDefault(); onDrop($event)" (dragover)="$event.stopPropagation(); $event.preventDefault()">
          <img class="mr-1" src="assets/upload.svg" height="28">
          <span class="normal-text">Перетащите файлы или нажмите для загрузки</span>
        </div>
      </div>
    </div>
    <input hidden #selectFiles type="file" (change)="handleFileInput(selectFiles.files)" multiple>
    <div class="file-loading" *ngFor="let file of awaitForLoad">
      <div><i class="pi pi-file{{getFileExtensionIcon(file)}} mr-2"></i>{{file}}</div>
      <div class="cxy"><i *ngIf="!isLoaded(file)" class="pi pi-spin pi-spinner"></i><i *ngIf="isLoaded(file)" class="pi pi-check"></i></div>
      <div class="cxy" (click)="remove(file)"><i class="pi pi-times cursor-pointer"></i></div>
    </div>
  </div>
</div>
<div class="form-footer">
  <div class="mr-1 cx">
    <div (click)="createTask()" pButton label="Создать" class="button"></div>
  </div>
  <div (click)="close()" pButton label="Отмена" class="button-cancel ml-1"></div>
</div>


