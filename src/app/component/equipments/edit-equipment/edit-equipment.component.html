<div style="width: 560px; border-radius: 6px">
  <div class="header-parts">
    <div>
      <div class="pt-20 info-id">ID {{this.equipmentForm.value.id}}</div>
      <div class="header-parts-text">{{t.tr('Редактировать оборудование')}}</div>
    </div>
    <div class="df pt-25">
      <div class="task-button cxy mr-20" tooltipPosition="top" [pTooltip]="t.tr('Удалить оборудование')" (click)="deleteEquipment(this.equipmentForm.value.id)" [class.button-disabled]="buttonsAreHidden">
        <img src="assets/icons/trash.svg" height="20">
      </div>
      <div class="parts-button-close cxy" (click)="close()">
        <i class="pi pi-times"></i>
      </div>
    </div>
  </div>
  <form [formGroup]="equipmentForm" class="form-container">
    <div class="big-text-create mb-1">{{'SFI'}}</div>
<!--    <p-dropdown [disabled]="buttonsAreHidden" formControlName="sfi" class="select" optionLabel="code + ' - ' + ru" optionValue="code" placeholder="SFI" [options]="sfis" appendTo="body" styleClass="w-100 font-13" [filter]="true" filterBy="code,ru,en"> </p-dropdown>-->
    <p-dropdown [options]="sfis" [disabled]="buttonsAreHidden" formControlName="sfi" class="select" optionValue="code" (onChange)="changeSFI()"
                placeholder="SFI"  appendTo = "body" styleClass="w-100 font-13" [filter]="true" filterBy="code,ru,en">
      <ng-template pTemplate="selectedItem">
        <div class="flex align-items-center gap-2">
          {{sfiAndName}}
        </div>
      </ng-template>
      <ng-template let-sfi pTemplate="item">
        <div class="df">
          <div class="pr-10">{{sfi.code}}</div>
          <div>
            <div class="text-gray">{{sfi.ru}}</div>
            <div >{{sfi.eng}}</div>
          </div>
        </div>
      </ng-template>
    </p-dropdown>
    <div class="df space-between mt-10">
      <div>
        <div class="big-text-create mb-1">{{t.tr('Проект')}}</div>
        <p-dropdown formControlName="project" [disabled]="buttonsAreHidden" [options]="equipmentProjects" appendTo = "body" styleClass="width-220 font-13"></p-dropdown>
      </div>
      <div>
        <div class="big-text-create mb-1">{{t.tr('Отдел')}}</div>
        <p-dropdown [disabled]="buttonsAreHidden" formControlName="department" [options]="equipmentDepartments" appendTo = "body" styleClass="width-220 font-13"></p-dropdown>
      </div>
    </div>

    <label class="big-text-create mb-1 mt-10" for="name">{{t.tr('Наименование')}} </label>
    <input [readOnly]="buttonsAreHidden" pInputText id="name" type="text" formControlName="name" placeholder="{{t.tr('Наименование')}}">

    <label class="big-text-create mb-1 mt-10" for="description">{{t.tr('Описание')}}</label>
    <input [readOnly]="buttonsAreHidden" pInputText id="description" type="text" formControlName="description" placeholder="{{t.tr('Описание')}}">

    <label class="big-text-create mb-1 mt-10" for="comment">{{t.tr('Комментарий')}}</label>
    <textarea [readOnly]="buttonsAreHidden" pInputText id="comment" type="text" formControlName="comment" placeholder="{{t.tr('Комментарий')}}"></textarea>

    <div *ngIf="equipmentFilesSrc.length != 0" class="mt-20 height-160 ovf-auto">
      <p-table [value]="equipmentFilesSrc" styleClass="p-datatable-striped">

        <ng-template pTemplate="body" let-file>
          <!--      <div (click)="openFile(file.url)" [pTooltip]="file.name" tooltipPosition="bottom" class="attachment-issues df mb-5 cursor-pointer">-->
          <tr class="border-top task-row cursor-pointer">
            <td class="padding-5">
              <div (click)="openFile(file.url)" [pTooltip]="file.name" tooltipPosition="bottom" class="attachment-issues df mb-5 cursor-pointer">
                <img [src]="'assets/task/' + getFileExtensionIcon(file.url)" height="16"/>
                <span class="file-name-esp mx-10 cy">{{trimFileName(file.url, 10) + ' '}}</span>
              </div>
            </td>
            <td class="padding-5">{{file.type_name}}</td>
            <td class="padding-5">REV{{file.rev}}</td>
            <td class="padding-5">{{this.auth.getUserNameById(file.user_id)}}</td>
            <td>{{this.getDateOnly(file.create_date)}}</td>
            <td class="padding-5">
              <div (click)="downloadFile(file.url)">
                <svg class="icon-nest" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                </svg>
              </div>
            <td class="padding-5" [hidden]="buttonsAreHidden">
              <div (click)="deleteFile(file)">
                <svg class="icon-nest delete-button" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                </svg>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>


    <div class="mr-5 mt-1 df justify-content-end">
      <div tabindex="10" [hidden]="buttonsAreHidden" (click)="addFiles()" class="button-ok ml-1">{{t.tr('Добавить файлы')}}</div>
    </div>
    <div class="mr-5 mt-20 df justify-content-end">
      <div tabindex="10" [hidden]="buttonsAreHidden" (click)="editEquipment()" class="button-ok cxy">{{t.tr('Сохранить')}}</div>
      <div tabindex="10" [hidden]="buttonsAreHidden" (click)="close()" class="button-cancel cxy ml-20">{{t.tr('Отмена')}}</div>
    </div>
  </form>
</div>
